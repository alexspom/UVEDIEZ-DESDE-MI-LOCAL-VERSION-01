#descomentar cuando queiran varias versiones de un kit
#BEGINBLOQUE=VDCARGAORDEN.PAN
#  POSX=1
#  POSY=1
#  REGPAG=15
#ENDBLOQUE  

BEGINBLOQUE=VDLANZAORDEN.PAN
  POSX=1
  POSY=20
  REGPAG=15
  PREREGISTRO=PRESEHIJO
  
  TECLA=SF9,FEJECUTA("!CSELPREGUNTA","¿ DESEA ANULAR LA ORDEN CON CÓDIGO :CODORDKIT ?",
                    "CANULAORDEN", "ERROR AL ANULAR ORDEN DE KIT", 
					FCOMMIT,"",
					FFAILURE,"ORDEN ANULADA. ES POSIBLE QUE LOS \n CAMBIOS TARDEN EN REFLEJARSE EN PANTALLA", 
					FPULSATECLAS("F3","F2")
				    )
					
  CURSOR=CANULAORDEN INSERT INTO VDORDKITCAB (CODORDKIT, TIPOORDKIT, CODPROVE, CODDIV, CODOPEMODIF,  STATUS,   CODART, CODLOT, CANTIDAD, UNIDADESHOSTCLI, SEQORDKIT)
                                       SELECT OKC.CODORDKIT, OKC.TIPOORDKIT, OKC.CODPROVE, OKC.CODDIV, VDUSER.GETUSER,  100,   OKC.CODART, OKC.CODLOT, OKC.CANTIDAD - :CANTIDADSEL, OKC.UNIDADESHOSTCLI, OKC.SEQORDKIT + 1
									   FROM VDORDKITCAB OKC
									   WHERE OKC.CODORDKIT = :CODORDKIT AND OKC.CODDIV = :CODDIV AND OKC.SEQORDKIT = (SELECT MAX(SEQORDKIT) FROM VDORDKITCAB WHERE CODORDKIT = :CODORDKIT AND CODDIV = :CODDIV AND STATUS = 300);
									   
  BOTON=B1,1015,100,70,70,"P",borrar.png,SF9,"Anular orden de kit",INCLUDECSS="background-color: transparent;border-width:0px"
ENDBLOQUE  
BEGINBLOQUE=VDKITSLIN.PAN
  PADRE=VDLANZAORDEN.PAN
  PREQUERY=QUERYHIJO
  PREREGISTRO=PRESEHIJO
  REGPAG=10
  POSX=1
  POSY=50
  WLONY=200
ENDBLOQUE