#***
# VDPEDIDOAUX.DEF - Generación automática del código c SOLOQUERY para Pedidos                                                       
# 
# Propósito: idem.
#           
# Autor	 : FPD
# Revisado por: 
# Fecha  : 27-03-2007                                               
#********************************************************************************
# Modificaciones
#***
NOMBRE=PEDIDO;

EXTRA=NUEVAVERSION,V10LONG
EXTRA=ESTADOSPR,V10LONG;
EXTRA=ESTADOSEX,V10LONG;
EXTRA=ESTADOINI,V10LONG;
EXTRA=ESTADOFIN,V10LONG;
EXTRA=RET,V10LONG;
EXTRA=VDPEDIDOCAB.CODDIV;
EXTRA=VDPEDIDOCAB.ANOPED;
EXTRA=VDPEDIDOCAB.CODPED;
EXTRA=VDPEDIDOCAB.SEQPED;


SELECT=NUEVAVERSION,SELECT NVL(MAX(SEQPED),0)+1 NUEVAVERSION
                      FROM VDPEDIDOCAB
				             WHERE CODDIV=:VDPEDIDOCAB.CODDIV AND ANOPED=:VDPEDIDOCAB.ANOPED AND CODPED=:VDPEDIDOCAB.CODPED;

PROCEDURE=FINPEDIDO,BEGIN VDPED.FINPEDIDO(:VDPEDIDOCAB.CODDIV,:VDPEDIDOCAB.ANOPED,:VDPEDIDOCAB.CODPED,:VDPEDIDOCAB.SEQPED,:VDPEDIDOCAB.STATUS,
                                          :ESTADOSPR,:ESTADOSEX,:RET); END;@
                                          
PROCEDURE=CREAVERSION,BEGIN VDPED.CREAVERSION(:VDPEDIDOCAB.CODDIV,:VDPEDIDOCAB.ANOPED,:VDPEDIDOCAB.CODPED,:VDPEDIDOCAB.SEQPED,:VDCOMEN.COMENTARIO,:RET); END;@                                          
				             
CURSOR=STATUSPRIO,SELECT CODDIV,ANOPED,CODPED,SEQPED FROM VDPEDIDOCAB PEC, VDSERIEEXP SEX 
                    WHERE PEC.STATUS=:VDPEDIDOCAB.STATUS AND
                          PEC.CODSERIEEXP = SEX.CODSERIEEXP
              ORDER BY SEX.PRIORIDAD, SEX.CODSERIEEXP, PEC.PRIORIDAD, PEC.FECSERVICIO, PEC.CODDIV, PEC.ANOPED, PEC.CODPED, PEC.SEQPED;

PROCEDURE=DISPONIBILIDAD, BEGIN
                              VDDISP.CALCULADISP(:VDTAREAS.TAREA);
                          END;@

PROCEDURE=LIBERAMOVPEDIDO, BEGIN VDPED.LIBERAMOVPEDIDO(:VDPEDIDOCAB.CODDEMANDA,:ESTADOINI,:ESTADOFIN,:RET); END;@

PROCEDURE=ACTLINEASPEDIDO,BEGIN 
                              VDPED.ACTLINEASPEDIDO(:VDPEDIDOCAB.CODDIV,:VDPEDIDOCAB.ANOPED,:VDPEDIDOCAB.CODPED,:VDPEDIDOCAB.SEQPED,:RET); 
                          END;@
