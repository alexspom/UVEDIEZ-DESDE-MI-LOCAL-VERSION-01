CAMPO=HFICHERO,AUXILIAR,OCULTO,"@L@@@@@@@@@@"
CAMPO=CODDIV,AUXILIAR,OCULTO,"____"

BEGINBLOQUEFRM=MOVIMDIV
   TABLA=DUAL
   SOLOQUERY

   SELECT=SELECT DISTINCT BUZONOUT BUZONOUT
           FROM VDDIVIS
           WHERE CODDIV LIKE :CODDIV;

   CAMPO=CODDIV,AUXILIAR,VIRTUAL,OCULTO
   CAMPO=BUZONOUT,AUXILIAR,OCULTO,"_256"
   CAMPO=HFICHERO,AUXILIAR,VIRTUAL,OCULTO
ENDBLOQUE

BEGINBLOQUEFRM=MOVIM
  PADRE=MOVIMDIV
  TABLA=MOVIM STD
  SOLOQUERY

  PREBLOQUE=FABREFICHEROSTD(":BUZONOUT","HFICHERO")
  POSTBLOQUE=FCIERRAFICHERO(":HFICHERO")

  POSTQUERY=FESCRIBEFICHERO(":HFICHERO")
    
  POSTUPDATE=FEJECUTA("CUPDAMOV","No puedo actualizar el movimiento")

  SELECT=SELECT CM.CODMOV,AR.CODART,AR.DESART,CM.CODLOT,CANTIDAD
          FROM VDARTIC AR,VDMOVIM CM
          WHERE CM.CODART=AR.CODART AND AR.CODDIV IN (SELECT CODDIV FROM VDDIVIS WHERE BUZONOUT=:BUZONOUT) AND ROWNUM<10 AND
                CM.STATUS=VDST.FMOVPDTEINTER;

  CAMPO=CANTIDAD,CONVIERTE=FCONVIERTEARTFROMDB(":CODART");FCONVIERTEART2DB(":CODART"),AUXILIAR,OCULTO,"#L###########"
  CAMPO=HFICHERO,AUXILIAR,VIRTUAL,OCULTO
  CAMPO=BUZONOUT,AUXILIAR,VIRTUAL,OCULTO
  
  CURSOR=CUPDAMOV UPDATE VDMOVIM SET STATUS=VDST.FMOVINTERFASAD
                   WHERE CODMOV=:CODMOV;

ENDBLOQUE
